---
layout: post
title:  "RESTful이란"
icon:  heart-o
category: [programing]
---

** RESTful이란 **
REpresentational State Transfer의 약자입니다.
이것은 장비간 통신을 위해 CORBA, RPC, SOAP등의 복잡한 방법을 사용하는 대신, 간단하게 HTTP를 이용하는 것이 목적입니다.
REST는 자원 지향 구조(Resource Oriented Architecture)로 웹 사이트의 이미지, 텍스트, DB 내용 등의 모든 자원에 고유한 URI를 부여합니다.

엄격한 의미로 REST는 네트워크 아키텍쳐 원리모음 입니다.

*네트워크 아키텍처 원리란 자원을 정의하고 자원에 대한 주소를 지정하는 방법 전반을 말합니다.*

** CRUD **
Create : 생성(POST)
Read : 조회(GET)
Update : 수정(PUT)
Delete : 삭제(DELETE)
위의 각 기능의 앞글자를 따서 위와같은 기능을 하는 것들을 CRUD라고 합니다.
이 기능에 대응하는 HTTP 메소드는 괄호안의 POST, GET, PUT, DELETE 입니다.

동일한 URL일 경우에도 메소드마다 기능이 다르게 이용 됩니다.

POST : http://localhost/api/user/홍길동

홍길동의 user정보를 생성합니다.
PUT : http://localhost/api/user/홍길동

홍길동의 user정보를 수정합니다.
GET : http://localhost/api/user/홍길동

홍길동의 user정보를 가져옵니다.
DELETE : http://localhost/api/user/홍길동

홍길동의 user정보를 제거합니다.
위와 같이 REST API 서버에서는 동일한 URL의 경우에도 메서드에 따른 각각의 비즈니스 로직을 동작하게 됩니다.

URL에 동사보다는 명사를 사용

예를들면 user를 추가하거나 가져오는 api에 대해서

GET /getUser/홍길동
POST /setUser/홍길동
위와같이 사용하는걸 동사를 사용한다고 볼 수 있습니다.

허나 위에 배운것과 같이 메서드의 뜻을 이해 했다면 동사를 붙여서 url을 여러개로 분리할 필요 없이 통일해서 사용할 수 있습니다.
메서드가 동사의 역할을 하기 때문입니다. 위의 예제를 아래와 같이 수정해보겠습니다.

GET /user/홍길동
POST /user/홍길동
GET메서드는 get을 의미할 것이고, POST 메서드는 생성을 의미하기로 우리는 위에서 공부했습니다.
하나를 알면 둘을 아는 분들이라면 PUT과 DELETE도 마찬가지로 동작한다는 걸 이해하실 것 입니다.
이로써 우리는 통일된 URL을 사용할 수 있습니다.

6가지를 충족하는 아키텍처 스타일

Client-Server
Stateless
Cache
Uniform Interface
Layered System
Code-On-Demand


저 단어만 봐서는 감이 잘 안옵니다. 하나씩 무엇인지 알아봅시다.
Client-Server


REST서버는 API를 제공합니다.
하나 혹은 여러 클라이언트에서 하나의 REST API를 이용할 수 있습니다.
REST 서버에서 비즈니스 로직 처리 및 저장을 책임집니다.
클라이언트의 경우 사용자 인증이나 컨택스트(세션, 로그인 정보) 등을 직접 관리하고 책임지는 구조로 REST 서버와 역할이 나뉘어 지고 있습니다.

Stateless

무상태성이라고도 합니다.
상태 정보를 저장하지 않고 각 API서버는 들어오는 요청만을 들어오는 메시지로만 처리하면 됩니다.
세션과 같은 컨텍스트 정보를 신경쓸 필요가 없기 때문에 구현이 단순해집니다.

Cache

캐쉬를 사용할 수 있습니다..
HTTP 프로토콜 표준에서 사용하는 Last-Modified태그나 E-Tag를 이용하면 구현할 수 있습니다.
캐쉬를 사용하게 되면 응답시간 뿐 아니라 REST 서버 트랜잭션이 발생하지 않기 때문에 전체 응답시간, 성능, 서버의 자원 사용률을 향상 시킬 수 있습니다.

Uniform Interface

REST는 HTTP 표준에만 따른다면, 어떤 기술이라던지 사용이 가능한 인터페이스 스타일입니다.


Layered System

클라이언트는 직접 최종서버에 붙었는지 등을 알수가 없습니다.
intermediary 서버 등을 통해서 로드밸런싱/공유 캐시등을 통해 확장성과 보안성을 향상 가능 합니다.

Code-On-Demand

서버로 부터 스크립트를 받아서 Client에서 실행하는 것입니다.
반드시 충족할 필요는 없습니다.




출처: http://sonim1.tistory.com/105 [Kendrick's Blog]



트랙잭션( transaction ) 개념을 말하자면

비지니스 로직의 처리에 있어서
데이터베이스 내에서 한꺼번에 수행되어야할 일련의 연산들 입니다.
간단하게 말하자면 전부 되거나~~ 전부 안되거나~~

트랙잭션 의 모든 연산은 반드시 한꺼번에 완료가 되야 하며
 그렇지 않은경우에는 한꺼번에 취소되어야 하는 원자성을 가지고 있습니다

한꺼번에 완료가 된경우에는 성공적인 종료 COMMIT

이 경우에는 작업결과는 데이터베이스에 반영이 되게 됩니다.

취소가 된경우에는 비정상적인 종료 ROLLBACK

이 경우에 작업결과는 모두 취소되게 되어 데이터베이스에 영향을 미치지 않게 됩니다.





이 트랙잭션에 성질들을 보게되면

1. 원자성(Atomicity)

- 분리 할수 없는 하나의 단위로 작업은 모두 완료되거나 모두 취소 되어야 합니다.

2. 일관성(Consistency)

- 사용되는 모든 데이터는 일관되어야 합니다.

3. 격리성(Isolation)

 - 접근하고 있는 데이터는 다른 트랜잭션으로 부터 격리 되어야 합니다.

트랜잭션이 진행되기전과 완료된 후에 상태를 볼수 있지만

트랜잭션이 진행되는 중간 데이터는 볼수 없습니다.

4. 영속성(Durability)

- 트랙잭션이 정상 종료되면 그 결과는 시스템에 영구적으로 적용되어야 합니다.

5. 순차성(Sequentiality)

- 데이터를 다시 로드하고 트랜잭션을 재생하여 원래 트랜잭션이 수행된 후의 상태로

 데이터를 되돌리는 것을 말합니다.



트랙잭션의 예를 하나 들어 이해를 해볼게요ㅎㅎ



저는 카드하나를 들고서 은행 인출기 앞으로 갑니다.

처음에     카드를 넣습니다

두번째로     어떤거래를 할지 선택을하고

세번째로     비밀번호를 눌러 인증을 받고

네번째로     거래를 완료 하겠죠

이 네가지 과정을 묶어서 트랜잭션이라고 합니다.



거래까지 완료됬으면 COMMIT

중간에 비밀번호를 틀리거나.. 인증을 받았는데 거래를 취소하거나 하는 일이

 발생해서 처음으로 돌아갈경우에는 ROLLBACK 이라고 합니다.





출처: http://121202.tistory.com/17 [책방 창고]
